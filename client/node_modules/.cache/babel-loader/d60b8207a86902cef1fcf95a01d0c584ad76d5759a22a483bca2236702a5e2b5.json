{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreateTicket(){// base Ticket creation function\nconst[formData,setFormData]=useState({subject:'',message:'',orderNumber:''});const[error,setError]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const navigate=useNavigate();// handle any changes in the ticket form\nconst ticketChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};// handles when a ticket it submitted\nconst handleSubmit=async e=>{e.preventDefault();setError('');// error message template\n// check that both fields are filled in\nif(!formData.subject||!formData.message||!formData.orderNumber){setError('Subject, message, and order number are required');return;}// check if order number is valid (if included)\nif(formData.orderNumber&&isNaN(formData.orderNumber)){setError('Order number must be a number');return;}setIsSubmitting(true);try{// send ticket submission request to API\nconst response=await fetch('/api/tickets',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',// security measure for cookies\nbody:JSON.stringify({subject:formData.subject,message:formData.message,orderNumber:formData.orderNumber})});if(!response.ok){// error check for invalid input\nconst errorData=await response.json();throw new Error(errorData.error||'Failed to create ticket');}// go to dashboard on success\nnavigate('/dashboard');}catch(err){setError(err.message);}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-ticket\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Support Ticket\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"ticket-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"subject\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"subject\",name:\"subject\",value:formData.subject,onChange:ticketChange,required:true,maxLength:\"100\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"message\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"message\",name:\"message\",value:formData.message,onChange:ticketChange,required:true,rows:\"6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"orderNumber\",children:\"Order Number (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"orderNumber\",name:\"orderNumber\",value:formData.orderNumber,onChange:ticketChange,pattern:\"\\\\d*\",title:\"Please enter numbers only\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"submit-button\",children:isSubmitting?'Submitting...':'Submit Ticket'})})]})]});}export default CreateTicket;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","CreateTicket","formData","setFormData","subject","message","orderNumber","error","setError","isSubmitting","setIsSubmitting","navigate","ticketChange","e","name","value","target","prev","handleSubmit","preventDefault","isNaN","response","fetch","method","headers","credentials","body","JSON","stringify","ok","errorData","json","Error","err","className","children","onSubmit","htmlFor","type","id","onChange","required","maxLength","rows","pattern","title","disabled"],"sources":["/Users/dylankao/Desktop/WebDev/SUPPORT/yoru-support/client/src/components/Tickets/CreateTicket.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nfunction CreateTicket() { // base Ticket creation function\n  const [formData, setFormData] = useState({\n    subject: '',\n    message: '',\n    orderNumber: ''\n  });\n  \n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const navigate = useNavigate();\n\n  // handle any changes in the ticket form\n  const ticketChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // handles when a ticket it submitted\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(''); // error message template\n    \n    // check that both fields are filled in\n    if (!formData.subject || !formData.message || !formData.orderNumber) {\n      setError('Subject, message, and order number are required');\n      return;\n    }\n\n    // check if order number is valid (if included)\n    if (formData.orderNumber && isNaN(formData.orderNumber)) {\n      setError('Order number must be a number');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try { \n      // send ticket submission request to API\n      const response = await fetch('/api/tickets', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include', // security measure for cookies\n        body: JSON.stringify({\n          subject: formData.subject,\n          message: formData.message,\n          orderNumber: formData.orderNumber\n        })\n      });\n\n      if (!response.ok) { // error check for invalid input\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create ticket');\n      }\n\n      // go to dashboard on success\n      navigate('/dashboard');\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"create-ticket\">\n      <h2>Create New Support Ticket</h2>\n      \n      {error && (\n        <div className=\"error-message\">\n          {error}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"ticket-form\">\n        <div className=\"form-group\">\n          <label htmlFor=\"subject\">Subject</label>\n          <input\n            type=\"text\"\n            id=\"subject\"\n            name=\"subject\"\n            value={formData.subject}\n            onChange={ticketChange}\n            required\n            maxLength=\"100\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"message\">Message</label>\n          <textarea\n            id=\"message\"\n            name=\"message\"\n            value={formData.message}\n            onChange={ticketChange}\n            required\n            rows=\"6\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"orderNumber\">Order Number (optional)</label>\n          <input\n            type=\"text\"\n            id=\"orderNumber\"\n            name=\"orderNumber\"\n            value={formData.orderNumber}\n            onChange={ticketChange}\n            pattern=\"\\d*\"\n            title=\"Please enter numbers only\"\n          />\n        </div>\n\n        <div className=\"form-actions\">\n          <button \n            type=\"submit\" \n            disabled={isSubmitting}\n            className=\"submit-button\"\n          >\n            {isSubmitting ? 'Submitting...' : 'Submit Ticket'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default CreateTicket;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}